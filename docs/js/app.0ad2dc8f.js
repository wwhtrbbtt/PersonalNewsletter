(function(e){function t(t){for(var o,a,i=t[0],l=t[1],u=t[2],d=0,h=[];d<i.length;d++)a=i[d],Object.prototype.hasOwnProperty.call(s,a)&&s[a]&&h.push(s[a][0]),s[a]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);c&&c(t);while(h.length)h.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],o=!0,i=1;i<n.length;i++){var l=n[i];0!==s[l]&&(o=!1)}o&&(r.splice(t--,1),e=a(a.s=n[0]))}return e}var o={},s={app:0},r=[];function a(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=o,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(n,o,function(t){return e[t]}.bind(null,o));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var c=l;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0175":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("navbar"),n("router-view")],1)},r=[],a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"main",attrs:{id:"navbar"}},[n("nav",{staticClass:"topnav"},[n("router-link",{class:{active:"home"==e.currentRouteName},attrs:{to:"/"}},[e._v("Home")]),e.loggedIn?n("router-link",{class:{active:"letters"==e.currentRouteName},attrs:{to:"/Letters/"}},[e._v("Letters")]):e._e(),e.loggedIn?n("router-link",{class:{active:"settings"==e.currentRouteName},attrs:{to:"/settings/"}},[e._v("Settings")]):e._e(),e.loggedIn?e._e():n("router-link",{class:{active:"register"==e.currentRouteName},attrs:{to:"/register/"}},[e._v("Register")]),e.loggedIn?e._e():n("router-link",{class:{active:"login"==e.currentRouteName},attrs:{to:"/login/"}},[e._v("Login")])],1)])},i=[],l=(n("b0c0"),n("260b")),u=(n("ea7b"),{data:function(){return{loggedIn:!1}},created:function(){var e=this;l["a"].auth().onAuthStateChanged((function(t){t?(e.loggedIn=!0,console.log("logged in")):(e.loggedIn=!1,console.log("not logged in"))}))},computed:{currentRouteName:function(){return this.$route.name}}}),c=u,d=n("2877"),h=Object(d["a"])(c,a,i,!1,null,"2b6c9c4e",null),p=h.exports,m=(n("a766"),{name:"App",components:{navbar:p}}),f=m,g=Object(d["a"])(f,s,r,!1,null,null,null),v=g.exports,b=n("8c4f"),w=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.show?n("div",{staticClass:"main",attrs:{id:"main"}},[n("h1",[e._v("Edit your newsletter")]),n("Input",{attrs:{text:"Newsletter name",type:"text",placeholder:"eg. Sport newsletter"},model:{value:e.config.Feedname,callback:function(t){e.$set(e.config,"Feedname",t)},expression:"config.Feedname"}}),n("br"),n("br"),n("Input",{attrs:{text:"Newsletter time",type:"text",placeholder:"eg. 20:30"},model:{value:e.config.Time,callback:function(t){e.$set(e.config,"Time",t)},expression:"config.Time"}}),n("br"),""!=e.timeWarning?n("div",{staticStyle:{color:"red"}},[n("br"),e._v(e._s(e.timeWarning))]):e._e(),n("br"),n("h1",[e._v("Modules in your newsletter")]),e.config.Modules.length?e._e():n("p",[e._v(" No modules yet - add one! ")]),e._l(e.config.Modules,(function(t,o){return n("div",{key:o},[n("i",[n("h2",[e._v(e._s(e.modulesInfo[t.Name].ShowName))])]),n("p",[e._v(e._s(e.modulesInfo[t.Name].Description))]),e._l(t.Settings,(function(o,s){return n("div",{key:s},[n("Input",{attrs:{text:o.Name,type:e.parseType(e.modulesInfo[t.Name].Settings[s].Type)},model:{value:o.Value,callback:function(t){e.$set(o,"Value",t)},expression:"setting.Value"}}),n("br"),n("br")],1)})),n("button",{staticClass:"save-button s-b-small",on:{click:function(t){return e.removeModule(o)}}},[e._v("Remove")])],2)})),n("br"),n("Dropdown",{attrs:{title:"Add a module",options:e.possibleModulesDropdown()},model:{value:e.chosenModule,callback:function(t){e.chosenModule=t},expression:"chosenModule"}}),n("br"),n("br"),n("div",{staticStyle:{"text-align":"center"}},[n("button",{staticClass:"save-button",attrs:{type:"button"},on:{click:e.saveChanges}},[e._v("Done")]),n("br"),n("br"),n("button",{staticClass:"save-button",attrs:{type:"button"},on:{click:e.deleteLetter}},[e._v("Delete")]),n("br"),n("br")])],2):e._e()},_=[],y=(n("ac1f"),n("1276"),n("466d"),n("d81d"),n("159b"),n("a434"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("label",{staticClass:"field field_v1"},[n("input",{staticClass:"field__input",attrs:{placeholder:e.placeholder,type:e.type},domProps:{value:e.value},on:{input:e.onInput}}),n("br"),n("br"),n("span",{staticClass:"field__label-wrap"},[n("span",{staticClass:"field__label"},[e._v(e._s(e.text))])])])])}),x=[],I={name:"Input",props:{value:{required:!0},placeholder:{type:String,required:!1},type:{type:String,required:!0},text:{type:String,required:!0}},methods:{onInput:function(e){this.$emit("input",e.target.value)}}},C=I,M=Object(d["a"])(C,y,x,!1,null,null,null),k=M.exports,N=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"dropdown"},[n("link",{attrs:{href:"https://css.gg/chevron-double-down.css",rel:"stylesheet"}}),n("button",{staticClass:"dropbtn"},[e._v(e._s(e.title)+" "),n("svg",{attrs:{width:"17",height:"17",viewBox:"0 -3 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{d:"M7.75735 5.63605L6.34314 7.05026L12 12.7071L17.6569 7.05029L16.2427 5.63608L12 9.87872L7.75735 5.63605Z",fill:"currentColor"}}),n("path",{attrs:{d:"M6.34314 12.7071L7.75735 11.2929L12 15.5356L16.2427 11.2929L17.6569 12.7071L12 18.364L6.34314 12.7071Z",fill:"currentColor"}})])]),n("div",{staticClass:"dropdown-content"},e._l(e.options,(function(t,o){return n("a",{key:o,on:{click:function(n){e.chosen=t.Key}}},[e._v(e._s(t.Value))])})),0)])},S=[],L={name:"Dropdown",props:{title:{required:!0,type:String},options:{required:!0,type:Array}},methods:{emit:function(e){this.$emit("input",e)}},watch:{chosen:function(e){this.emit(e)}},data:function(){return{chosen:""}}},$=L,E=(n("666c"),Object(d["a"])($,N,S,!1,null,"4a7548af",null)),P=E.exports,T={components:{Input:k,Dropdown:P},name:"Dashboard",data:function(){return{config:{Modules:[]},possibleModules:[],modulesInfo:{},show:!1,chosenModule:"",test:""}},created:function(){var e=this,t=this.$route.query.letter;l["a"].auth().onAuthStateChanged((function(n){n?(e.loadPossibleModules(),e.loadLetter(t)):console.log("not logged in")}))},computed:{timeWarning:function(){try{var e=parseInt(this.config.Time.split(":")[0]),t=parseInt(this.config.Time.split(":")[1]);if(this.config.Time.match(/\d{2}:\d{2}/)[0]==this.config.Time&&e<24&&t<60)return""}catch(n){return"Invalid time. Use the 24h format (eg.  20:00)"}return"Invalid time. Use the 24h format (eg.  20:00)"}},watch:{chosenModule:function(){this.addModule(),this.chosenModule=""}},methods:{possibleModulesDropdown:function(){var e=[];return this.possibleModules.map((function(t){e.push({Key:t.InternalName,Value:t.ShowName})})),e},saveChanges:function(){var e=this;if(""==this.timeWarning){this.config.Modules.forEach((function(t){var n=0;t.Settings.forEach((function(o){"int"==e.modulesInfo[t.Name].Settings[n].Type&&(o.Value=parseInt(o.Value)),n++}))})),console.log("saved");var t=this.$route.query.letter;be.collection("NewLetters").doc(t).set(this.config).then((function(){console.log("letter updated!"),e.$router.push({name:"letters"})}))}else alert("Couldn't save letter")},loadLetter:function(e){var t=this;be.collection("NewLetters").doc(e).get().then((function(e){var n=e.data();t.config=n,t.show=!0})).catch((function(e){console.log(e.message),alert(e.message)}))},loadPossibleModules:function(){var e=this;be.collection("misc").doc("newModules").get().then((function(t){e.possibleModules=t.data().Modules})).then((function(){var t={};e.possibleModules.forEach((function(e){t[e.InternalName]=e})),e.modulesInfo=t})).catch((function(e){console.log(e.message),alert(e.message)}))},deleteLetter:function(){var e=this;if(confirm("Do you really want to delete '".concat(this.config.ShowName,"'? This can't be undone."))){var t=this.$route.query.letter;be.collection("NewLetters").doc(t).delete().then((function(){console.log("deleted letter"),e.$router.push({name:"letters"})})).catch((function(e){alert(e.message)}))}},addModule:function(){console.log(this.chosenModule);var e=this.modulesInfo[this.chosenModule];if(""!=this.chosenModule){console.log(e);var t=[];null!=e.Settings&&e.Settings.forEach((function(e){var n=null;n="str"==e.Type?"":"int"==e.Type?5:"",t.push({Name:e.InternalName,Value:n})})),this.config.Modules.push({Name:this.chosenModule,Settings:t}),this.chosenModule=""}},parseType:function(e){return"int"==e?"number":"text"},removeModule:function(e){console.log(e),this.config.Modules.splice(parseInt(e),1),console.log(this.config)}}},j=T,O=Object(d["a"])(j,w,_,!1,null,"0f98e73a",null),A=O.exports,D=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"main",attrs:{id:"main"}},[n("h1",[e._v("PersonalNewsletter")]),n("h2",[e._v("Create your own customized newsletter in about 3 minutes.")]),n("p",[e._v(" The idea is simple: get all the information you need, every day, ad-free. Create your own newsletter, add a few modules, configure it a bit and thats it! ")]),n("br"),n("br"),n("div",{staticStyle:{"text-align":"center"}},[e.loggedIn?e._e():n("button",{staticClass:"save-button",on:{click:function(t){return e.$router.push("/register")}}},[e._v("Get started")]),e.loggedIn?n("button",{staticClass:"save-button",on:{click:function(t){return e.$router.push("/letters")}}},[e._v("Your letters")]):e._e()])])},q=[],R={name:"Home",created:function(){var e=this;l["a"].auth().onAuthStateChanged((function(t){e.loggedIn=!!t}))},data:function(){return{loggedIn:!1}}},U=R,V=(n("9ef9"),Object(d["a"])(U,D,q,!1,null,"b3e367b8",null)),Y=V.exports,G=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.show?n("div",{attrs:{id:"main"}},[n("h1",[e._v(" Account ")]),n("h2",[e._v("Profile information")]),e.edit?e._e():n("div",[n("p",[e._v("Email: "+e._s(e.email))]),n("p",[e._v("Your name: "+e._s(e.name))]),n("button",{staticClass:"save-button s-b-small",on:{click:function(t){e.edit=!0}}},[e._v("Edit")])]),e.edit?n("div",[n("p",[e._v("Email: "+e._s(e.email))]),n("p",[e._v("You can't edit your email (yet)")]),e.edit?n("Input",{attrs:{text:"Name",type:"text"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}):e._e(),n("br"),n("br"),e.edit?n("button",{staticClass:"save-button s-b-small",on:{click:e.saveChanges}},[e._v("Save")]):e._e()],1):e._e(),n("h2",[e._v("Profile settings")]),n("button",{staticClass:"save-button s-b-small",staticStyle:{"margin-right":"20px"},on:{click:e.logout}},[e._v("Logout")]),n("button",{staticClass:"save-button s-b-small",on:{click:e.deleteAccount}},[e._v("Delete account")]),n("p",{staticStyle:{"font-size":"10px"}},[e._v("User ID: "+e._s(e.user.uid))])]):e._e()},W=[],F={components:{Input:k},created:function(){var e=this;l["a"].auth().onAuthStateChanged((function(t){t?(e.user=t,e.show=!0,e.name=t.displayName,e.email=t.email,console.log("logged in")):(e.show=!1,console.log("not logged in"))}))},methods:{logout:function(){var e=this;l["a"].auth().signOut().then((function(){console.log("logged out"),e.$router.push("/")})).catch((function(t){alert(t.message),e.$router.push("/")}))},deleteAccount:function(){var e=this;confirm("Do you really want to delete your account? All of your data will be deleted.")&&(be.collection("NewLetters").where("User","==",this.user.uid).get().then((function(e){e.forEach((function(e){e.get().then((function(e){e.delete().then((function(){console.log("deleted letter")})).catch((function(e){console.log(e.message)}))})).catch((function(e){console.log(e.message)}))}))})),l["a"].auth().currentUser.delete().then((function(){e.$router.push("/login/")})).catch((function(t){"This operation is sensitive and requires recent authentication. Log in again before retrying this request."==t.message&&(alert("Logout and login before deleting your account"),e.$router.push("/login/"))})))},saveChanges:function(){var e=this,t=l["a"].auth().currentUser;t.updateProfile({displayName:this.name}).then(console.log("updated display name")).catch((function(e){console.log(e.message)})),be.collection("NewLetters").where("User","==",this.user.uid).get().then((function(t){t.forEach((function(t){console.log(t.id),be.collection("NewLetters").doc(t.id).update({Greetingname:e.name}).then((function(){console.log("updated element")})).catch((function(e){console.log(e.message)}))}))})),this.edit=!1}},data:function(){return{user:{},show:!1,edit:!1,email:"",name:""}}},z=F,H=Object(d["a"])(z,G,W,!1,null,"0a817c26",null),Z=H.exports,J=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"main",attrs:{id:"main"}},[n("form",{on:{submit:function(t){return t.preventDefault(),e.login(t)}}},[n("h2",[e._v("Login")]),n("Input",{attrs:{text:"Email",type:"email"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),n("br"),n("br"),n("Input",{attrs:{text:"Password",type:"password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),n("br"),n("br"),""!=e.error?n("p",[e._v(e._s(e.error))]):e._e(),n("button",{staticClass:"save-button",attrs:{type:"submit"}},[e._v(" Login ")])],1),n("p",{staticStyle:{cursor:"pointer"},on:{click:e.forgotPassword}},[e._v("Reset password")])])},K=[],B={components:{Input:k},data:function(){return{email:"",password:"",error:""}},methods:{forgotPassword:function(){var e=this;this.error="",""==this.password&&(this.error="Enter your email"),l["a"].auth().sendPasswordResetEmail(this.email).then((function(){e.error="Send an email. Please also check your spam folder."})).catch((function(t){e.error=t.message}))},login:function(){var e=this;this.error="",""==this.password&&(this.error="Enter your email"),l["a"].auth().signInWithEmailAndPassword(this.email,this.password).then((function(){e.$router.push("/letters/")})).catch((function(t){"The password is invalid or the user does not have a password."==t.message?e.error="The password is invalid":"There is no user record corresponding to this identifier. The user may have been deleted."==t.message?e.error="Unknown email address":e.error=t.message}))}}},Q=B,X=(n("6908"),Object(d["a"])(Q,J,K,!1,null,"16c47d55",null)),ee=X.exports,te=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"main",attrs:{id:"main"}},[n("form",{on:{submit:function(t){return t.preventDefault(),e.register(t)}}},[n("h2",[e._v("Register")]),n("Input",{attrs:{text:"Email",type:"email"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),n("br"),n("br"),n("Input",{attrs:{text:"Name",type:"text"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),n("br"),n("br"),n("Input",{attrs:{text:"Password",type:"password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),n("br"),n("br"),n("Input",{attrs:{text:"Confirm password",type:"password"},model:{value:e.passwordConfirm,callback:function(t){e.passwordConfirm=t},expression:"passwordConfirm"}}),n("br"),n("br"),""!=e.error?n("p",[e._v(e._s(e.error))]):e._e(),n("button",{staticClass:"save-button",attrs:{type:"submit"}},[e._v(" Register ")])],1)])},ne=[],oe={components:{Input:k},data:function(){return{email:"",password:"",passwordConfirm:"",error:"",name:""}},methods:{setName:function(e){var t=l["a"].auth().currentUser;t.updateProfile({displayName:e}).then(console.log("updated display name")).catch((function(e){console.log(e.message)}))},register:function(){var e=this;console.log(this.password,this.passwordConfirm,this.error),this.error="",this.password==this.passwordConfirm?this.password.lenght<6?this.error="Password has to be longer":l["a"].auth().createUserWithEmailAndPassword(this.email,this.password).then((function(){e.$router.push("/letters/"),l["a"].auth().onAuthStateChanged((function(t){t?(console.log("logged in"),e.setName(e.name)):console.log("not logged in")}))})).catch((function(t){e.error=t.message})):this.error="Passwords do not match"}}},se=oe,re=(n("a6d5"),Object(d["a"])(se,te,ne,!1,null,"00b10362",null)),ae=re.exports,ie=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.show?n("div",{staticClass:"main",attrs:{id:"main"}},[n("h1",[e._v("Your letters")]),e.letters.length?e._e():n("p",{staticStyle:{"text-align":"center"}},[e._v(" No letters yet - create one! ")]),e._l(e.letters,(function(t,o){return n("div",{key:o},[n("h3",[e._v(e._s(t.Feedname))]),n("p",[e._v(e._s(t.Modules.length)+" Modules, comes at "+e._s(t.Time))]),n("button",{staticClass:"save-button s-b-small",on:{click:function(n){return e.$router.push({name:"dashboard",query:{letter:t.id}})}}},[e._v(" Edit ")])])})),n("br"),n("br"),n("br"),n("div",{staticStyle:{"text-align":"center"}},[n("button",{staticClass:"save-button",on:{click:e.addLetter}},[e._v("Add letter")])])],2):e._e()},le=[],ue={data:function(){return{letters:[],user:{},show:!1}},methods:{getLetters:function(){var e=this;be.collection("NewLetters").where("User","==",this.user.uid).get().then((function(t){t.forEach((function(t){var n=t.data();n.id=t.id,e.letters.push(n)})),e.show=!0})).catch((function(e){console.log(e.message),alert(e.message)}))},addLetter:function(){var e=this;console.log(this.user),this.user!={}?be.collection("NewLetters").add({Email:this.user.email,Feedname:"Newsletter "+(this.letters.length+1),Greetingname:this.user.displayName,Time:"10:00",User:this.user.uid,Modules:[]}).then((function(t){console.log("Document written with ID: ",t.id),e.$router.push({name:"dashboard",query:{letter:t.id}})})).catch((function(e){console.log(e.message)})):console.log("not logged in")}},created:function(){var e=this;l["a"].auth().onAuthStateChanged((function(t){t?(e.user=t,console.log(t.uid),e.getLetters()):(console.log("not logged in"),e.user={})}))}},ce=ue,de=Object(d["a"])(ce,ie,le,!1,null,null,null),he=de.exports,pe=n("2591");o["a"].use(b["a"]);var me=new b["a"]({mode:"history",base:"/",routes:[{path:"/dashboard",name:"dashboard",component:A,meta:{authRequired:!1}},{path:"/",name:"home",component:Y},{path:"/settings/",name:"settings",component:Z},{path:"/login/",name:"login",component:ee},{path:"/register/",name:"register",component:ae},{path:"/letters/",name:"letters",component:he}]});me.beforeEach((function(e,t,n){e.matched.some((function(e){return e.meta.authRequired}))?pe["a"].auth().currentUser?n():n({path:"/"}):n()}));var fe=me,ge=(n("e71f"),{apiKey:"AIzaSyAjJxeUAweVr4HmfGjIdMpkPYGbk0THr50",authDomain:"newsletter-43a2b.firebaseapp.com",databaseURL:"https://newsletter-43a2b-default-rtdb.europe-west1.firebasedatabase.app",projectId:"newsletter-43a2b",storageBucket:"newsletter-43a2b.appspot.com",messagingSenderId:"385030942753",appId:"1:385030942753:web:c0f4c5e89815b5adb93360",measurementId:"G-ZYCMD17ZYS"});o["a"].config.productionTip=!1,l["a"].initializeApp(ge),new o["a"]({router:fe,render:function(e){return e(v)}}).$mount("#app");var ve=l["a"].firestore(),be=t["default"]=ve},6195:function(e,t,n){},"666c":function(e,t,n){"use strict";n("6195")},6908:function(e,t,n){"use strict";n("0175")},"76d6":function(e,t,n){},"9ef9":function(e,t,n){"use strict";n("76d6")},a6d5:function(e,t,n){"use strict";n("eec0")},a766:function(e,t,n){},eec0:function(e,t,n){}});
//# sourceMappingURL=app.0ad2dc8f.js.map